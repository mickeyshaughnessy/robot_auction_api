<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width ,initial-scale=1, shrink-to-fit=no">
	
		<link rel="stylesheet" href="Homepage.css">
		<link rel="stylesheet" href="Dark.css">
		<link rel="stylesheet" href="Light.css">

		<link rel="stylesheet" href="header_styles.css">
		<link rel="stylesheet" href="footer_styles.css">

		<link rel="stylesheet" href="login_styles.css">
		
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

		<title>RSE Homepage</title>
		<style>
			.auth-message {
				margin-top: 10px;
				padding: 8px;
				border-radius: 4px;
			}
			.error-message {
				background-color: #f8d7da;
				color: #721c24;
				border: 1px solid #f5c6cb;
			}
			.success-message {
				background-color: #d4edda;
				color: #155724;
				border: 1px solid #c3e6cb;
			}
			.user-profile {
				padding: 15px;
				text-align: center;
			}
			.user-stats {
				margin-top: 15px;
				padding: 10px;
				background-color: #f8f9fa;
				border-radius: 4px;
			}
			.register-form {
				display: none;
			}
		</style>
	</head>
	<body>
		<!--Themes are selected by giving #ThemeSelector a different class-->
		<div id="ThemeSelector" class="LightTheme">
			<div class="Header">
				<nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
					<div class="container-fluid">
						<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="navbar-nav me-auto mb-2 mb-lg-0">
								<li class="nav-item">
									<a class="nav-link active" aria-current="page" href="#">Home</a>
								</li>
								<li class="nav-item dropdown">
									<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Technical</a>
									<ul class="dropdown-menu">
										<li><a class="dropdown-item" href="api_docs.html">API Documentation</a></li>
										<li><a class="dropdown-item" href="Dashboard.html">Dashboard</a></li>
										<li><a class="dropdown-item" href="nearby.html">Nearby</a></li>
									</ul>
								</li>
								<li class="nav-item dropdown">
									<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">About</a>
									<ul class="dropdown-menu">
										<li><a class="dropdown-item" href="about.html">About</a></li>
										<li><a class="dropdown-item" href="faq.html">FAQ</a></li>
										<li><a class="dropdown-item" href="terms.html">Terms of Service</a></li>
									</ul>
								</li>
							</ul>
						</div>
						<div class="User-Icon-Large">
							<input type="image"  aria-expanded="false" aria-controls="#Right-Fixed-Container" src="images/Icons/user.png" data-bs-toggle="collapse" data-bs-target="#Right-Fixed-Container">
							<span id="auth-status-indicator" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="display: none;">
								âœ“
							</span>
						</div>
					</div>
				</nav>				
			</div>
			
			<div class="collapse" id="Right-Fixed-Container">
				<div class="Right-Fixed d-flex flex-column align-items-center">
					<!-- Login Form -->
					<div id="login-form" class="Login-Controls">
						<h2 class="text-center">Login</h2>
						<form id="login-form-element">
							<div class="mb-3">
								<input type="text" class="form-control" id="login-username" placeholder="Enter username">
							</div>
							<div class="mb-3">
								<input type="password" class="form-control" id="login-password" placeholder="Enter password">
							</div>
							<div class="mb-3 form-check">
								<input type="checkbox" class="form-check-input" id="rememberMe">
								<label class="form-check-label" for="rememberMe">Remember me</label>
							</div>
							<button type="submit" class="btn btn-primary w-100 mb-3">Sign In</button>
							<div class="Register-ForgotPassword d-flex justify-content-between">
								<a href="#" id="show-register-form" class="text-decoration-none">Register</a>
								<a href="#" class="text-decoration-none">Forgot password?</a>
							</div>
							<div id="login-message" class="auth-message" style="display: none;"></div>
						</form>
					</div>

					<!-- Register Form -->
					<div id="register-form" class="Login-Controls register-form">
						<h2 class="text-center">Register</h2>
						<form id="register-form-element">
							<div class="mb-3">
								<input type="text" class="form-control" id="register-username" placeholder="Choose a username (3-20 chars)">
							</div>
							<div class="mb-3">
								<input type="password" class="form-control" id="register-password" placeholder="Choose a password (min 8 chars)">
							</div>
							<div class="mb-3">
								<input type="password" class="form-control" id="register-confirm-password" placeholder="Confirm password">
							</div>
							<button type="submit" class="btn btn-primary w-100 mb-3">Register</button>
							<div class="text-center">
								<a href="#" id="show-login-form" class="text-decoration-none">Back to login</a>
							</div>
							<div id="register-message" class="auth-message" style="display: none;"></div>
						</form>
					</div>

					<!-- User Profile (Shown when logged in) -->
					<div id="user-profile" class="Login-Controls" style="display: none;">
						<div class="user-profile">
							<h3 id="profile-username">Username</h3>
							<div class="user-stats">
								<p><strong>Rating:</strong> <span id="user-rating">0/5</span></p>
								<p><strong>Total Ratings:</strong> <span id="user-total-ratings">0</span></p>
							</div>
							<div class="mt-3">
								<a href="Dashboard.html" class="btn btn-primary mb-2 w-100">My Dashboard</a>
								<a href="nearby.html" class="btn btn-success mb-2 w-100">Find Nearby Services</a>
								<button id="logout-button" class="btn btn-danger w-100">Logout</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="Main">
				<div id="Banner">
					<h1>The Robot Services Exchange</h1>
				</div>
				<div class="container">
					<div class="row" id="Hero">
						<div class="col-lg-8 col-12 d-flex flex-column justify-content-center"> 
							<div class="Inner-Textbox">
								<h4>What is The RSE?</h4>
								<p>The Robot Services Exchange is a new platform that connects people in need of robot services (buyers) with robot owners or operators (sellers). Buyers post service request bid and sellers grab jobs with their capabilities to fulfill these requests. The RSE streamlines the process of finding, hiring, and managing robot services across all industries, enabling efficient and cost-effective solutions. </p>
							</div>
						</div>
						<div class="img-col col-lg-4 col-0">
							<img src="images/Mascot/Robot_2_NoBG-2-2.png" alt="Robot mascot"></img>
						</div>
					</div>
				</div>
				<div class="container">
					<div class="row" id="Explanation">
						<div class="img-col col-xxl-4 col-xl-6 col-0">
							<img src="images/Mascot/Robot_2_NoBG-2-5.png" alt="Robot Mascot 2"></img>
						</div>
						<div class="col-xxl-8 col-xl-6 col-12 col-12d-flex flex-column justify-content-center">
							<div class="Inner-Textbox">
								<h4>How does it work?</h4>
								<p>RSE operates through a dynamic bidding and matching system.</p>
								<ul>
									<li><b>Bid Submission: </b>Buyers post service requests by submitting bids, specifying details such as the type of service required, location, desired price, and the deadline for completion.</li>
									<li><b>Job Search: </b>Robot owners (sellers) can search for available bids that match their robots' services and operational area.</li>
									<li><b>Matching and Acceptance: </b>Once matched, the robot is dispatched to perform the requested service as per the agreed terms.</li>
									<li><b>Completion and Rating: </b>Upon completion, both buyers and sellers can rate each other, providing feedback to maintain quality and trust within the platform.</li>
								</ul>
								<p>This system ensures efficient allocation of robot services, competitive pricing, and transparent transactions between buyers and sellers.</p>
							</div>
						</div>
					</div>
				</div>
				<div class="container">
					<div class="row" id="Usecases_Heading">
						<h2>What services can be provided?</h2>
					</div>
				</div>
				<div class="Bottom-Section">
					<div class="d-flex justify-content-center" id="Usecases_1_container">
						<div class="row" id="Usecases_1">
							<div class="col-xxl-4 col-xl-6 col-12 d-flex justify-content-center">
								<div class="Inner">
									<h4>Cleaning and Maintenance</h4>
									<img src="images/Icons/mop.png"></img>	
									<p>Floor cleaning<br>
									Window washing<br>
									Waste disposal<br>
									</p>
								</div>
							</div>
							<div class="col-xxl-4 col-xl-6 col-12 d-flex justify-content-center">
								<div class="Inner">
									<h4>Agriculture</h4>
									<img src="images/Icons/farm.png"></img>
									<p>Crop monitoring<br>
									Planting<br>
									Harvesting
									</p>
								</div>
							</div>
							<div class="col-xxl-4 col-xl-6 col-12 d-flex justify-content-center">
								<div class="Inner">
									<h4>Delivery and Logistics</h4>
									<img src="images/Icons/delivery-van.png"></img>
									<p>Package delivery<br>
									Invertory management<br>
									Warehouse operations
									</p>
								</div>
							</div>
							<div class="col-xxl-4 col-xl-6 col-12 d-flex justify-content-center">
								<div class="Inner">
									<h4>Construction</h4>
									<img src="images/Icons/excavator.png"></img>
									<p>Site surveying<br>
									Material<br>
									Harvesting
									</p>
								</div>
							</div>
							<div class="col-xxl-4 col-xl-6 col-12 d-flex justify-content-center">
								<div class="Inner">
									<h4>Security and Surveillance</h4>
									<img src="images/Icons/shield.png"></img>
									<p>Patrol services<br>
									Monitoring<br>
									Threat detectioniv
									</p>
								</div>
							</div>
							<div class="col-xxl-4 col-xl-6 col-12 d-flex justify-content-center">
								<div class="Inner">
									<h4>Personal Services</h4>
									<img src="images/Icons/call-center.png"></img>
									<p>Tutoring<br>
									Personal shopping<br>
									Event assistance
									</p>
								</div>
							</div>
						</div>
					</div>
					<div class="container"">
						<div class="row" id="Quickstart_1">
							<div class="Inner">
								<h4><b>Getting started</b></h4>
								<p><b>You need to create an account on RSE:</b></p>
								<p><b>Registration:</b> Sign up by providing your username and password via the /register endpoint.<br>
								<b>Authentication:</b> Log in using your credentials through the /login endpoint to obtain an authentication token.<br>
								<b>Start using RSE:</b> Begin posting bids for services or watching nearby completed jobs.</p>
								<button id="register-now-btn" class="btn btn-primary">Register now!</button>
							</div>
						</div>
					</div>
					<div class="container">
						<div class="row" id="Quickstart_2">
							<div class="col-xxl-6">
								<div class="Inner Left">
									<h4><b>Service Buyers</b></h4>
									<p>Ensure you have registered and logged in to obtain an authentication token.<br>
										Prepare your bid data, including:</p>
									<ul>
										<li><b>service: </b>The type of service you need.</li>
										<li><b>lat: </b>Latitude of the service location.</li>
										<li><b>lon: </b>Longitude of the service location.</li>
										<li><b>price: </b>Your bid price for the service (in USD).</li>
										<li><b>end_time: </b>Your bid price for the service (in USD).</li>
									</ul>
									<p>Send a Post request to/make_bid with your bid data in JSON format, including you authentication token in the header.</p>
									<div class="btn btn-primary" href="#TODO">Read the full guide!</div>
								</div>
							</div>
							<div class="col-xxl-6">
								<div class="Inner Right">
									<h4><b>Service Suppliers</b></h4>
									<p>Ensure you have registered and logged in to obtain an authentication token.<br>
Prepare your robot's 				data, including:</p>
									<ul>
										<li><b>capabilities: </b>The services your robot can perform (comma-seperated if multiple).</li>
										<li><b>lat: </b>Current latitude of your robot.</li>
										<li><b>lon: </b>Current longitude of your robot.</li>
										<li><b>max_distance: </b> Maximum distance (in miles) your robot can travel for a job.</li>
									</ul>
									<p>Send a post request to /grab_job with your robot's data in JSON format, including your authentication token in the header.</p>
									<div class="btn btn-primary" href="#TODO">Read the full guide!</div>
								</div>
							</div>
						</div>
					</div>
					<div class="container"  id="Latest_News"">
						<div id="Latest_News_Inner" class="d-flex justify-content-center">
							<div id="carousel" class="carousel slide">
								<div class="carousel-inner">
									<div class="carousel-item active">
										<div class="Inner-Row-1">
											<div class="Inner-Row-2 row">
											<div class="col-xl-4 col-0">
												<img src='images/Mascot/mascot.png' style="max-width:100%;"></img>
											</div>
											<div class="col-xl-8 col-12 d-flex flex-column justify-content-center">
												<div class="News_Text">
													<h4>News Item #1</h4>
                                                    <p> The Robot Services Exchange Solana coin is live at $THERSX GL9ybQfyELjrRch6ExjLW33TjPQmLKXxsZJJCCiPpump.</p>
												</div>
											</div>
											</div>
										</div> 
									</div>
									<div class="carousel-item">
										<div class="Inner-Row-1">
											<div class="Inner-Row-2 row">
											<div class="col-xl-8 col-12 d-flex flex-column justify-content-center">
												<div class="News_Text">
													<h4>News Item #2</h4>
                                                    <p>The exchange is running on HTTP at <code>curl 100.26.236.1:5001/ping</code></p>
												</div>
											</div>
											<div class="col-xl-4 col-0">
												<img src='images/Mascot/mascot.png' style="max-width:100%;"></img>
											</div>
											</div>
										</div> 
									</div>
									<div class="carousel-item">
										<div class="Inner-Row-1">
											<div class="Inner-Row-2 row">
											<div class="col-xl-4 col-12 col-0">
												<img src='images/Mascot/mascot.png' style="max-width:100%;"></img>
											</div>
											<div class="col-xl-8 d-flex flex-column justify-content-center">
												<div class="News_Text">
													<h4>News Item #3</h4>
                                                    <p>Check out the cool new endpoints: /chat, /bulletin and /nearby </p>
												</div>
											</div>
											</div>
										</div>
									</div>
									<div class="carousel-item">
										<div class="Inner-Row-1">
											<div class="Inner-Row-2 row">
											<div class="col-xl-8 col-12 d-flex flex-column justify-content-center">
												<div class="News_Text">
													<h4>News Item 1</h4>
                                                    <p> Nothing to report </p>
												</div>
											</div>
											<div class="col-xl-4 col-0">
												<img src='images/Mascot/mascot.png' style="max-width:100%;"></img>
											</div>
											</div>
										</div>
									</div>
								</div>
								<button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
									<span class="carousel-control-prev-icon" aria-hidden="true"></span>
									<span class="visually-hidden">Previous</span>
								</button>
								<button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
									<span class="carousel-control-next-icon" aria-hidden="true"></span>
									<span class="visually-hidden">Next</span>
								</button> 
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="Footer">
				<div class="container">
					<div class="row">
						<div class="col-6">
							<h4>Attribution</h4>
							<div class="Inner">
								<a href="https://www.flaticon.com/free-icons/freight" title="freight icons">Freight icons created by monkik - Flaticon</a>
								<br>
								<a href="https://www.flaticon.com/free-icons/call-center" title="call center icons">Call center icons created by monkik - Flaticon</a>
								<br>
								<a href="https://www.flaticon.com/free-icons/excavator" title="excavator icons">Excavator icons created by monkik - Flaticon</a>
								<br>
								<a href="https://www.flaticon.com/free-icons/milk" title="milk icons">Milk icons created by monkik - Flaticon</a>
								<br>
								<a href="https://www.flaticon.com/free-icons/mop" title="mop icons">Mop icons created by monkik - Flaticon</a>
								<br>
								<a href="https://www.flaticon.com/free-icons/shield" title="shield icons">Shield icons created by monkik - Flaticon</a>
								<br>
								<a href="https://www.flaticon.com/free-icons/user" title="user icons">User icons created by Freepik - Flaticon</a>
							</div>
						</div>
						<div class="col-3">
							<h4>Links</h4>
							<div class="Inner">
								<a href="about.html">About</a>
								<br>
								<a href="tos.html">Terms of Service</a>
								<br>
								<a href="api_docs.html">API</a>
								<br>
								<a href="faq.html">FAQ</a>
							</div>
						</div>
						<div class="col-3">
							<h4>Social media</h4>
							<div class="Inner">
								<!--TODO: change icons-->
								<a href="https://x.com/RobotServicesX">Twitter</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
			<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
		
            <script>
                // Constants and API endpoints
                const API_BASE_URL = 'http://100.26.236.1:5001';
                const LOGIN_ENDPOINT = `${API_BASE_URL}/login`;
                const REGISTER_ENDPOINT = `${API_BASE_URL}/register`;
                const ACCOUNT_DATA_ENDPOINT = `${API_BASE_URL}/account_data`;
                
                // DOM Elements
                const loginForm = document.getElementById('login-form');
                const registerForm = document.getElementById('register-form');
                const userProfile = document.getElementById('user-profile');
                const loginMessage = document.getElementById('login-message');
                const registerMessage = document.getElementById('register-message');
                const authStatusIndicator = document.getElementById('auth-status-indicator');
                
                // Form switching functions
                document.getElementById('show-register-form').addEventListener('click', function(e) {
                    e.preventDefault();
                    loginForm.style.display = 'none';
                    registerForm.style.display = 'block';
                });
                
                document.getElementById('show-login-form').addEventListener('click', function(e) {
                    e.preventDefault();
                    registerForm.style.display = 'none';
                    loginForm.style.display = 'block';
                });
                
                document.getElementById('register-now-btn').addEventListener('click', function() {
                    // Open the login/register panel and show register form
                    registerForm.style.display = 'block';
                    loginForm.style.display = 'none';
                    
                    // Trigger the collapse to open
                    const rightFixedContainer = document.getElementById('Right-Fixed-Container');
                    if (!rightFixedContainer.classList.contains('show')) {
                        document.querySelector('.User-Icon-Large input').click();
                    }
                });
                
                // Check if user is already logged in
                document.addEventListener('DOMContentLoaded', function() {
                    checkAuthStatus();
                });
                
                function checkAuthStatus() {
                    const token = localStorage.getItem('rseAuthToken');
                    const username = localStorage.getItem('rseUsername');
                    
                    if (token && username) {
                        // Update UI for authenticated user
                        showAuthenticatedUI(username, token);
                        // Fetch and display user data
                        fetchAccountData(token);
                    }
                }
                
                // Login form submission
                document.getElementById('login-form-element').addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const username = document.getElementById('login-username').value.trim();
                    const password = document.getElementById('login-password').value;
                    const rememberMe = document.getElementById('rememberMe').checked;
                    
                    if (!username || !password) {
                        showMessage(loginMessage, 'Please enter both username and password', 'error');
                        return;
                    }
                    
                    try {
                        showMessage(loginMessage, 'Logging in...', 'info');
                        
                        const response = await fetch(LOGIN_ENDPOINT, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                username: username,
                                password: password
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (!response.ok) {
                            throw new Error(data.error || 'Login failed');
                        }
                        
                        // Store auth token
                        const token = data.access_token;
                        if (rememberMe) {
                            localStorage.setItem('rseAuthToken', token);
                            localStorage.setItem('rseUsername', username);
                        } else {
                            sessionStorage.setItem('rseAuthToken', token);
                            sessionStorage.setItem('rseUsername', username);
                        }
                        
                        showMessage(loginMessage, 'Login successful!', 'success');
                        
                        // Update UI for authenticated user
                        showAuthenticatedUI(username, token);
                        
                        // Fetch and display user data
                        fetchAccountData(token);
                        
                    } catch (error) {
                        showMessage(loginMessage, `Error: ${error.message}`, 'error');
                    }
                });
                
                // Register form submission
                document.getElementById('register-form-element').addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const username = document.getElementById('register-username').value.trim();
                    const password = document.getElementById('register-password').value;
                    const confirmPassword = document.getElementById('register-confirm-password').value;
                    
                    if (!username || !password || !confirmPassword) {
                        showMessage(registerMessage, 'Please fill in all fields', 'error');
                        return;
                    }
                    
                    if (password !== confirmPassword) {
                        showMessage(registerMessage, 'Passwords do not match', 'error');
                        return;
                    }
                    
                    if (username.length < 3 || username.length > 20) {
                        showMessage(registerMessage, 'Username must be between 3 and 20 characters', 'error');
                        return;
                    }
                    
                    if (password.length < 8) {
                        showMessage(registerMessage, 'Password must be at least 8 characters', 'error');
                        return;
                    }
                    
                    try {
                        showMessage(registerMessage, 'Creating account...', 'info');
                        
                        const response = await fetch(REGISTER_ENDPOINT, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                username: username,
                                password: password
                            })
                        });
                        
                        const data = await response.json();
                        
                        if (!response.ok) {
                            throw new Error(data.error || 'Registration failed');
                        }
                        
                        showMessage(registerMessage, 'Registration successful! You can now log in.', 'success');
                        
                        // Clear registration form
                        document.getElementById('register-username').value = '';
                        document.getElementById('register-password').value = '';
                        document.getElementById('register-confirm-password').value = '';
                        
                        // Auto-fill login form and switch to it after a delay
                        document.getElementById('login-username').value = username;
                        setTimeout(() => {
                            registerForm.style.display = 'none';
                            loginForm.style.display = 'block';
                        }, 2000);
                        
                    } catch (error) {
                        showMessage(registerMessage, `Error: ${error.message}`, 'error');
                    }
                });
                
                // Logout functionality
                document.getElementById('logout-button').addEventListener('click', function() {
                    // Clear stored credentials
                    localStorage.removeItem('rseAuthToken');
                    localStorage.removeItem('rseUsername');
                    sessionStorage.removeItem('rseAuthToken');
                    sessionStorage.removeItem('rseUsername');
                    
                    // Update UI for logged out state
                    showLoggedOutUI();
                    
                    // Show success message
                    alert('You have been successfully logged out.');
                });
                
                // Helper functions
                function showMessage(element, message, type) {
                    element.textContent = message;
                    element.style.display = 'block';
                    
                    // Reset classes
                    element.classList.remove('error-message', 'success-message');
                    
                    // Add appropriate class
                    if (type === 'error') {
                        element.classList.add('error-message');
                    } else if (type === 'success') {
                        element.classList.add('success-message');
                    }
                    
                    // Auto hide after 5 seconds for success messages
                    if (type === 'success') {
                        setTimeout(() => {
                            element.style.display = 'none';
                        }, 5000);
                    }
                }
                
                function showAuthenticatedUI(username, token) {
                    // Hide login and register forms, show user profile
                    loginForm.style.display = 'none';
                    registerForm.style.display = 'none';
                    userProfile.style.display = 'block';
                    
                    // Update profile username
                    document.getElementById('profile-username').textContent = username;
                    
                    // Show authentication indicator
                    authStatusIndicator.style.display = 'block';
                }
                
                function showLoggedOutUI() {
                    // Show login form, hide register form and user profile
                    loginForm.style.display = 'block';
                    registerForm.style.display = 'none';
                    userProfile.style.display = 'none';
                    
                    // Clear form fields
                    document.getElementById('login-username').value = '';
                    document.getElementById('login-password').value = '';
                    document.getElementById('rememberMe').checked = false;
                    
                    // Hide authentication indicator
                    authStatusIndicator.style.display = 'none';
                }
                
                async function fetchAccountData(token) {
                    try {
                        const response = await fetch(ACCOUNT_DATA_ENDPOINT, {
                            method: 'GET',
                            headers: {
                                'Authorization': `Bearer ${token}`
                            }
                        });
                        
                        if (!response.ok) {
                            throw new Error('Failed to fetch account data');
                        }
                        
                        const data = await response.json();
                        
                        // Update user profile with account data
                        const ratingElement = document.getElementById('user-rating');
                        const totalRatingsElement = document.getElementById('user-total-ratings');
                        
                        if (data.total_ratings > 0) {
                            const avgRating = (data.stars / data.total_ratings).toFixed(1);
                            ratingElement.textContent = `${avgRating}/5`;
                        } else {
                            ratingElement.textContent = 'No ratings yet';
                        }
                        
                        totalRatingsElement.textContent = data.total_ratings;
                        
                    } catch (error) {
                        console.error('Error fetching account data:', error);
                    }
                }
            </script>